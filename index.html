# Nginx使用技巧

## 1. 如何确定nginx定义的upstream的状态？
一般nginx都是通过`/status`的url来暴露upstream的状态， 查找nginx配置文件中这个location的定义(一般在default.conf中)，可以发现如下配置：
```java
server {
    listen 8081;
    location /status {
    check_status;
    access_log   on;
    allow 192.168.0.0/16;
    allow 10.2.3.0/24;
    allow 10.6.1.0/24;
    deny all;
    }
}
```

要注意其中关于访问ip的控制，最好只能让给定的几台机器可以访问这个页面。外网可以从windows跳板机`10.6.1.5`上访问，也可以直接通过curl命令访问。
打开这个页面，可以看到类似如下的页面：
![image](/uploads/f0e08451849315fdc20ba8c3e2d28ab6/image.png)

有时候如果前端页面返回`502 Bad Gateway`的错误的时候就需要在这里先确认，nginx后端的upstream是否正常。
